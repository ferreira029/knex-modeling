#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Check if pushing to main branch
branch=$(git branch --show-current)
if [ "$branch" = "main" ]; then
  echo "âš ï¸  Pushing to main branch - running full validation..."
  
  # Run comprehensive validation
  npm run validate
  
  # Build to ensure everything compiles
  npm run build
  
  echo "âœ… Main branch validation passed!"
else
  echo "â„¹ï¸  Pushing to feature branch '$branch' - running basic checks..."
  
  # Run lighter validation for feature branches
  npm run typecheck
  npm run test:ci
  
  echo "âœ… Feature branch validation passed!"
fi

echo "ğŸ‰ Ready to push!" 